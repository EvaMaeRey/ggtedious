---
output: 
  github_document:
    toc: TRUE
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Welcome to the ggtedious workshop!

<!-- badges: start -->
<!-- badges: end -->

Let's build a cool ggplot2 extension function.  And then let's put it in a package. And let's do it right!  Some of it may be tedious.  https://angeladuckworth.com/grit-scale/

> 'Testing your code can be painful and tedious, but it greatly increases the quality of your code. testthat tries to make testing as fun as possible, so that you get a visceral satisfaction from writing tests. Testing should be addictive, so you do it all the time.'  - testthat introduction (probably Hadley Wickham)

Building a simple, straightforward extension in good company (workshop!) will provide a misery-loves-company occasion to build a correct package and strengthen testing muscles. 

# Meeting objectives:

<!-- 0. My pre-step: Figure out what best practices for ggplot2 extension packages and testing are; and/or figure out some experts to ask for help. -->


1. Practice a `compute_group` easy geom extension by creating geom_post(); also bonus geom_lollipop().
2. Put them in a package using best practices - practice best practices
3. Meet like minded stats educators, ggplot2 extenders, and package developers. 

# Part 1. Work on functionality

## Step 0. Do it with base ggplot2 (can become problem statement later)

```{r use_base_ggplot2}
prize_wheel <- data.frame(probs = c(.7, .2, .1), payout = c(0, 1, 5))

library(ggplot2)
ggplot(prize_wheel) + 
  aes(x = payout, y = probs) + 
  geom_point() + 
  aes(xend = payout, yend = 0) + 
  geom_segment()
```

And like-to-have code:

```{r, eval = F}
# would show just line
ggplot(prize_wheel) + 
  aes(x = payout, y = probs) + 
  geom_post()

# line and dot
ggplot(prize_wheel) + 
  aes(x = payout, y = probs) + 
  geom_point() + 
  geom_lollipop()
```


## Step 1. Write compute group function and test

reference: https://evamaerey.github.io/mytidytuesday/2022-01-03-easy-geom-recipes/easy_geom_recipes.html

```{r compute_group}


```



```{r try_compute_group}


```

## Step 2. Pass to ggproto object

```{r ggproto}


```

## Step 3. Write geom_post() functions

```{r geom_post}


```

## Step 3.1 Bonus, write geom_lollipop with list mechanism

```{r geom_lollipop}
geom_lollipop <- function(...){

  list(  
  geom_post(...),
  geom_point(...)
  )
  
}


```

## Step 4. Test it out enjoy! (possibly basis of examples and tests)

```{r}


```

## Step 5. Formalize tests, write messages.

```{r test_multiplication}
testthat::test_that("multiplication works", {
  testthat::expect_equal(2*2, 4)
})
```

# Part 2.  Build out package file structure, files

## Step A. devtools::create, 

https://evamaerey.github.io/package_in_20_minutes/package_in_20_minutes



## Step B. Send code to .R folder and test_that folder, we'll use {readme2pkg}.

Functions send code to proper folders for packaging.  

```{r, eval = F}
library(readme2pkg)
chunk_to_r(c("geom_post", "geom_lollipop"))
chunk_to_tests_testthat("test1")
```

## Step C. devtools::check

## Step D. Install and restart

# Done! 

# Appendix. list of code chunks in this doc.

```{r}
knitr::knit_code$get() |> names()
```
